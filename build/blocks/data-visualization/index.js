(()=>{"use strict";const e=window.wp.blocks,t=window.React,a=window.wp.i18n,l=window.wp.blockEditor,n=window.wp.components,r=window.wp.element,c=window.wp.primitives,i=(0,t.createElement)(c.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)(c.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})),o=(0,t.createElement)(c.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)(c.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})),s=[{label:(0,a.__)("Bar Chart","advanced-gutenberg-blocks"),value:"bar"},{label:(0,a.__)("Line Chart","advanced-gutenberg-blocks"),value:"line"},{label:(0,a.__)("Pie Chart","advanced-gutenberg-blocks"),value:"pie"}],d=JSON.parse('{"UU":"agb/data-visualization"}');(0,e.registerBlockType)(d.UU,{edit:function({attributes:e,setAttributes:c}){const d=(0,l.useBlockProps)(),{chartType:u,title:h,chartData:b,height:g}=e,[m,v]=(0,r.useState)(null),p=()=>{const e=[...b,{label:`Item ${b.length+1}`,value:Math.floor(100*Math.random())+10}];c({chartData:e})},w=(e,t,a)=>{const l=[...b];l[e][t]="value"===t?parseFloat(a)||0:a,c({chartData:l})};return(0,r.useEffect)(()=>{const e=document.querySelector(`#chart-${d.id} canvas`);if(!e||!window.Chart||0===b.length)return;m&&m.destroy();const t=e.getContext("2d"),a=["#3366CC","#DC3912","#FF9900","#109618","#990099"],l=new Chart(t,{type:u,data:{labels:b.map(e=>e.label),datasets:[{label:h||"Dataset",data:b.map(e=>e.value),backgroundColor:a.slice(0,b.length),borderColor:a.slice(0,b.length),borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!!h,text:h}}}});return v(l),()=>{l&&l.destroy()}},[u,b,h]),(0,t.createElement)(t.Fragment,null,(0,t.createElement)(l.InspectorControls,null,(0,t.createElement)(n.PanelBody,{title:(0,a.__)("Chart Settings","advanced-gutenberg-blocks"),initialOpen:!0},(0,t.createElement)(n.SelectControl,{label:(0,a.__)("Chart Type","advanced-gutenberg-blocks"),value:u,options:s,onChange:e=>c({chartType:e})}),(0,t.createElement)(n.TextControl,{label:(0,a.__)("Chart Title","advanced-gutenberg-blocks"),value:h,onChange:e=>c({title:e})}),(0,t.createElement)(n.NumberControl,{label:(0,a.__)("Height (px)","advanced-gutenberg-blocks"),value:g,onChange:e=>c({height:parseInt(e)||400}),min:200,max:800})),(0,t.createElement)(n.PanelBody,{title:(0,a.__)("Data Points","advanced-gutenberg-blocks"),initialOpen:!1},b.map((e,l)=>(0,t.createElement)("div",{key:l,style:{marginBottom:"12px",padding:"12px",background:"#f0f0f0",borderRadius:"4px"}},(0,t.createElement)(n.TextControl,{label:(0,a.__)("Label","advanced-gutenberg-blocks"),value:e.label,onChange:e=>w(l,"label",e)}),(0,t.createElement)(n.NumberControl,{label:(0,a.__)("Value","advanced-gutenberg-blocks"),value:e.value,onChange:e=>w(l,"value",e)}),(0,t.createElement)(n.Button,{icon:i,onClick:()=>(e=>{const t=b.filter((t,a)=>a!==e);c({chartData:t})})(l),isDestructive:!0,size:"small"}))),(0,t.createElement)(n.Button,{icon:o,onClick:p,variant:"secondary"},(0,a.__)("Add Data Point","advanced-gutenberg-blocks")))),(0,t.createElement)("div",{...d},(0,t.createElement)("div",{style:{padding:"24px",border:"2px solid #007cba",borderRadius:"8px"}},h&&(0,t.createElement)("h3",{style:{textAlign:"center"}},h),(0,t.createElement)("div",{id:`chart-${d.id}`,style:{height:`${g}px`,position:"relative"}},b.length>0?(0,t.createElement)("canvas",{style:{maxHeight:"100%"}}):(0,t.createElement)("div",{style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:"#f8f9fa",border:"2px dashed #ccc"}},(0,t.createElement)("div",{style:{textAlign:"center"}},(0,t.createElement)("h4",null,"Interactive Data Visualization"),(0,t.createElement)(n.Button,{onClick:p,variant:"primary"},"Add Sample Data")))))))},save:function({attributes:e}){const a=l.useBlockProps.save(),{chartType:n,title:r,chartData:c,height:i}=e;return(0,t.createElement)("div",{...a},(0,t.createElement)("div",{className:"agb-data-visualization","data-chart-type":n,"data-chart-data":JSON.stringify(c),"data-title":r,style:{height:`${i}px`}},r&&(0,t.createElement)("h3",null,r),(0,t.createElement)("div",{className:"agb-chart-container"},(0,t.createElement)("canvas",{className:"agb-chart-canvas"}))))},example:{attributes:{chartType:"bar",title:"Sample Chart",chartData:[{label:"January",value:65},{label:"February",value:59},{label:"March",value:80}]}}})})();